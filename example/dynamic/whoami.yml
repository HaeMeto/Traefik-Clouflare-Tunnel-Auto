http:
  middlewares:
    redirect-to-https:
      redirectScheme:
        scheme: https

  routers:
    # === PUBLIC ===
    whoami:
      rule: "Host(`whoami.example.id`)"
      entryPoints:
        - websecure
      service: whoami-service
      tls:
        certResolver: cloudflare

    # === LOCAL  ===
    whoami-lan:
      rule: "Host(`whoami.local.my.id`)"
      entryPoints: ["websecure","office"] 
      middlewares: ["default-whitelist"]
      service: whoami-svc
      tls: {}

  services:
    whoami-service:
      loadBalancer:
        passHostHeader: false
        servers:
          - url: "http://whoami:80"
   
